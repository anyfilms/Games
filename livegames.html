<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drama TV</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#0f0f0f;color:#fff}

/* HEADER */
.header{
 position:fixed;top:0;width:100%;
 display:flex;align-items:center;
 background:#0f0f0f;
 padding:12px;border-bottom:1px solid #222;
 z-index:1000
}
.menu-btn{font-size:24px;background:none;border:none;color:#fff;margin-right:12px}
.logo{font-size:22px;font-weight:bold;cursor:pointer}
.logo span{color:#ff0000}
.refresh-btn{
 font-size:20px;background:none;border:none;
 color:#fff;margin-left:auto;cursor:pointer
}

/* CHANNEL POPUP */
#channelPopup{
 position:fixed;top:0;left:-100%;
 width:100%;height:100%;
 background:#0f0f0f;
 z-index:2000;
 transition:.3s;
 overflow-y:auto
}
#channelPopup.active{left:0}
.popup-header{
 display:flex;align-items:center;
 padding:15px;border-bottom:1px solid #222
}
.popup-header button{
 font-size:22px;background:none;border:none;color:#fff;margin-right:10px
}
.channel-item{
 display:flex;align-items:center;
 padding:15px;border-bottom:1px solid #222;
 cursor:pointer
}
.channel-item img{
 width:45px;height:45px;border-radius:50%;
 margin-right:15px
}

/* FEED */
.video-feed{margin-top:70px;padding:10px}
.video-card{margin-bottom:25px}
.thumbnail{width:100%;aspect-ratio:16/9;border-radius:12px;object-fit:cover}

/* INFO */
.info{display:flex;margin-top:10px}
.channel-icon{
 width:40px;height:40px;border-radius:50%;
 margin-right:10px
}
.text{flex:1}
.title{
 font-size:15px;font-weight:500;
 display:-webkit-box;
 -webkit-line-clamp:2;
 -webkit-box-orient:vertical;
 overflow:hidden;
 line-height:1.3
}
.meta{font-size:12px;color:#aaa;margin-top:4px}

/* PLAYER */
#player{
 position:fixed;inset:0;
 background:#000;
 display:none;
 flex-direction:column;
 z-index:3000
}
.player-header{
 display:flex;align-items:center;
 padding:12px;background:#000
}
.back-btn{font-size:24px;background:none;border:none;color:#fff;margin-right:10px}
video{
 width:100%;
 max-height:55vh;
}
.actions{
 display:flex;justify-content:space-around;
 padding:10px;border-top:1px solid #222
}
.actions button{background:none;border:none;color:#fff}

/* COMMENTS */
.comments{padding:10px;border-top:1px solid #222}
.comments input{
 width:100%;padding:10px;
 background:#222;border:none;
 color:#fff;border-radius:6px
}
.comment{font-size:13px;margin-top:8px;color:#ccc}
</style>
</head>

<body>

<header class="header">
<button class="menu-btn" onclick="openChannels()">‚ò∞</button>
<div class="logo" onclick="showAll()">Drama <span>TV</span></div>
<button class="refresh-btn" onclick="refreshHome()"></button>
</header>

<!-- CHANNEL POPUP -->
<div id="channelPopup">
 <div class="popup-header">
  <button onclick="closeChannels()">‚Üê</button>
  <div>All Channels</div>
 </div>
 <div id="channelList"></div>
</div>

<main class="video-feed" id="feed"></main>

<!-- PLAYER -->
<div id="player">
 <div class="player-header">
  <button class="back-btn" onclick="closePlayer()">‚Üê</button>
  <div id="playerTitle"></div>
 </div>

 <video id="video"
  controls autoplay playsinline
  controlsList="nodownload"
  disablePictureInPicture
  oncontextmenu="return false">
 </video>

 <div class="actions">
  <button onclick="like()">üëç <span id="likes">0</span></button>
  <div>üëÅ <span id="views">0</span></div>
 </div>

 <div class="comments">
  <input placeholder="Add a comment‚Ä¶" onkeydown="addComment(event)">
  <div id="commentList"></div>
 </div>
</div>

<script>
const videos=[
{
 id:0,
 title:"‡§ó‡§∞‡•Ä‡§¨ ‡§Ø‡•Å‡§µ‡§ï ‡§ï‡•Ä ‡§™‡§§‡•ç‡§®‡•Ä ‡§®‡•á ‡§ß‡•ã‡§ñ‡§æ ‡§¶‡§ø‡§Ø‡§æ, ‡§Æ‡§ó‡§∞ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞‡§ï‡•á ‡§ï‡§∞‡•ã‡§°‡§º‡§™‡§§‡§ø ‡§¨‡§®‡§æ",
 videoUrl:"https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/5.mp4",
 thumbnail:"https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/6.jpg",
 channel:"Drama TV Official",
 icon:"https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png"
},
{
 id:0,
 title:"‡§Ö‡§∞‡§¨‡§™‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ, ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§ï‡§°‡§º‡§æ ‡§ú‡§µ‡§æ‡§¨",
 videoUrl:"https://huggingface.co/datasets/shortdramatv/chinesedramavideo/resolve/main/6.mp4",
 thumbnail:"https://huggingface.co/datasets/shortdramatv/chinesedramaimage/resolve/main/5.jpg",
 channel:"Action Drama",
 icon:"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"
}
];

const feed=document.getElementById("feed");
const player=document.getElementById("player");
const videoEl=document.getElementById("video");
const viewsEl=document.getElementById("views");
const likesEl=document.getElementById("likes");
const commentList=document.getElementById("commentList");
let current=null;

/* STORAGE */
function store(id){
 return JSON.parse(localStorage.getItem("v_"+id))||{views:0,likes:0,comments:[]}
}
function save(id,data){
 localStorage.setItem("v_"+id,JSON.stringify(data))
}

/* RENDER */
function render(list=videos){
 feed.innerHTML="";
 list.forEach(v=>{
  const s=store(v.id);
  const div=document.createElement("div");
  div.className="video-card";
  div.innerHTML=`
   <img src="${v.thumbnail}" class="thumbnail" onclick="openVideo(${v.id})">
   <div class="info">
    <img src="${v.icon}" class="channel-icon">
    <div class="text">
     <div class="title">${v.title}</div>
     <div class="meta">${v.channel} ‚Ä¢ ${s.views} views</div>
    </div>
   </div>`;
  feed.appendChild(div);
 });
}

/* PLAYER */
function openVideo(id){
 current=videos.find(v=>v.id===id);
 let s=store(id);
 s.views++;
 save(id,s);
 viewsEl.innerText=s.views;
 likesEl.innerText=s.likes;
 document.getElementById("playerTitle").innerText=current.title;
 videoEl.src=current.videoUrl;
 renderComments();
 player.style.display="flex";
 document.body.style.overflow="hidden";
}
function closePlayer(){
 videoEl.pause();videoEl.src="";
 player.style.display="none";
 document.body.style.overflow="auto";
}
function like(){
 let s=store(current.id);
 s.likes++;save(current.id,s);
 likesEl.innerText=s.likes;
}

/* COMMENTS */
function renderComments(){
 commentList.innerHTML="";
 store(current.id).comments.forEach(c=>{
  const d=document.createElement("div");
  d.className="comment";d.innerText=c;
  commentList.appendChild(d);
 });
}
function addComment(e){
 if(e.key==="Enter" && e.target.value.trim()){
  let s=store(current.id);
  s.comments.push(e.target.value);
  save(current.id,s);
  e.target.value="";
  renderComments();
 }
}

/* CHANNEL POPUP */
function openChannels(){
 document.getElementById("channelPopup").classList.add("active");
}
function closeChannels(){
 document.getElementById("channelPopup").classList.remove("active");
}

/* CHANNEL LIST */
const channelList=document.getElementById("channelList");
[...new Set(videos.map(v=>v.channel))].forEach(name=>{
 const v=videos.find(x=>x.channel===name);
 const d=document.createElement("div");
 d.className="channel-item";
 d.innerHTML=`<img src="${v.icon}"><div>${name}</div>`;
 d.onclick=()=>{
  render(videos.filter(x=>x.channel===name));
  closeChannels();
 };
 channelList.appendChild(d);
});

/* HOME & REFRESH */
function showAll(){render()}
function refreshHome(){location.reload()}

render();
</script>

</body>
</html>
